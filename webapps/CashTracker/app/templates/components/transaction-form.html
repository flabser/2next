<div class="form-wrapper">
    <form {{action 'save' on='submit' }}>
        <header class="content-header">
            <button class="btn-back" {{action 'close'}}>
                <i class="fa fa-chevron-left"></i>
            </button>
            <h1 class="header-title">
                {{t 'transaction'}}
            </h1>
        </header>
        <section class="content-body">
            <fieldset class="fieldset">
                <div class="form-group {{if errors.name 'has-error'}}">
                    <div class="controls">
                        <label>
                            {{tn-input-radio
                                value='E'
                                groupValue=transaction.transactionType}}
                            {{t 'expense'}}
                        </label>
                        <label>
                            {{tn-input-radio
                                value='I'
                                groupValue=transaction.transactionType}}
                            {{t 'income'}}
                        </label>
                        <label>
                            {{tn-input-radio
                                value='T'
                                groupValue=transaction.transactionType}}
                            {{t 'transfer'}}
                        </label>
                    </div>
                </div>
                <div class="form-group {{if errors.date 'has-error'}}">
                    <div class="control-label">
                        {{t 'date'}}
                    </div>
                    <div class="controls">
                        {{tn-input type='date' value=transaction.date focus-out='validateDate' class='span2'}}
                        {{#each errors.date as |error|}}
                            <div class="error-message">{{error.message}}</div>
                        {{/each}}
                    </div>
                </div>
                <div class="form-group {{if errors.accountFrom 'has-error'}}">
                    <div class="control-label">
                        {{#if isTransfer}}
                            {{t 'account_from'}}
                        {{else}}
                            {{t 'account'}}
                        {{/if}}
                    </div>
                    <div class="controls">
                        {{select-2
                            content='accounts'
                            value=transaction.accountFrom
                            optionValuePath='id'
                            optionLabelPath='name'
                            placeholder='account_from'
                        }}
                        {{#each errors.accountFrom as |error|}}
                            <div class="error-message">{{error.message}}</div>
                        {{/each}}
                    </div>
                </div>

                {{#if isTransfer}}
                    <div class="form-group {{if errors.accountTo 'has-error'}}">
                        <div class="control-label">
                            {{t 'account_to'}}
                        </div>
                        <div class="controls">
                            {{select-2
                                content='accounts'
                                value=transaction.accountTo
                                optionValuePath='id'
                                optionLabelPath='name'
                                placeholder='account_to'
                            }}
                            {{#each errors.accountTo as |error|}}
                                <div class="error-message">{{error.message}}</div>
                            {{/each}}
                        </div>
                    </div>
                {{/if}}

                <div class="form-group">
                    <div class="control-label">
                        {{t 'category'}}
                    </div>
                    <div class="controls">
                        {{select-2
                            content='categories'
                            value=transaction.category
                            optionValuePath='id'
                            optionLabelPath='name'
                            placeholder='Category'
                        }}
                    </div>
                </div>
                <div class="form-group {{if errors.amount 'has-error'}}">
                    <div class="control-label">
                        {{t 'amount'}}
                    </div>
                    <div class="controls">
                        {{tn-input type='number' value=transaction.amount key-up='validateAmount' class='span2'}}
                        {{#each errors.amount as |error|}}
                            <div class="error-message">{{error.message}}</div>
                        {{/each}}
                    </div>
                </div>
                <div class="form-group">
                    <div class="control-label">
                        {{t 'cost_center'}}
                    </div>
                    <div class="controls">
                        {{select-2
                            content='costCenters'
                            value=transaction.costCenter
                            optionValuePath='id'
                            optionLabelPath='name'
                            placeholder='Cost center'
                        }}
                    </div>
                </div>
                <div class="form-group">
                    <div class="control-label">
                        {{t 'tags'}}
                    </div>
                    <div class="controls">
                        {{select-2
                            content='tags'
                            value=transaction.tags
                            optionValuePath='id'
                            optionLabelPath='name'
                            placeholder='Tags'
                            multiple=true
                        }}
                    </div>
                </div>
                <div class="form-group {{if errors.name 'has-error'}}">
                    <div class="control-label">
                        {{t 'note'}}
                    </div>
                    <div class="controls">
                        {{textarea value=transaction.note key-up='validateNote' maxlength='256' class='span5'}}
                        {{count-down-characters transaction.note 256}}
                        {{#each errors.note as |error|}}
                            <div class="error-message">{{error.message}}</div>
                        {{/each}}
                    </div>
                </div>
            </fieldset>
            <fieldset class="fieldset">
                <legend class="legend">{{t 'attachments'}}</legend>
                {{upload-form
                    maxSize=3
                    fieldName='files'
                    attachments=transaction.attachments
                    addAttach='addAttach'
                    removeAttach='removeAttach'}}
            </fieldset>
        </section>
        <footer class="content-actions">
            <button class="btn" {{action 'close'}}>{{t 'close'}}</button>
            <button type="submit" class="btn btn-primary">{{t 'save'}}</button>
        </footer>
    </form>
</div>
